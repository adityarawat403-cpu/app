<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ReplyShastra</title>

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Arial, Helvetica, sans-serif;
}

body{
background:#0b0b0f;
color:white;
height:100vh;
display:flex;
flex-direction:column;
}

/* HEADER */
.header{
display:flex;
align-items:center;
justify-content:space-between;
padding:14px 16px;
border-bottom:1px solid #1c1c22;
background:#0b0b0f;
position:sticky;
top:0;
z-index:5;
}

.logo{
font-size:20px;
font-weight:bold;
letter-spacing:1px;
}

.menu{
font-size:22px;
cursor:pointer;
}

/* SIDE MENU */
.sidebar{
position:fixed;
top:0;
left:-260px;
width:260px;
height:100%;
background:#111118;
border-right:1px solid #1c1c22;
padding:20px;
transition:0.3s;
z-index:10;
}

.sidebar.active{
left:0;
}

.sidebar h3{
margin-bottom:20px;
}

.sidebtn{
display:block;
padding:12px;
margin-bottom:10px;
border-radius:10px;
background:#1a1a22;
cursor:pointer;
}

.sidebtn:hover{
background:#262633;
}

/* CHAT AREA */
.chat{
flex:1;
overflow-y:auto;
padding:16px;
padding-bottom:90px;
}

.msg{
max-width:80%;
padding:12px 14px;
border-radius:14px;
margin-bottom:12px;
line-height:1.4;
white-space:pre-wrap;
}

.user{
background:#6c5cff;
margin-left:auto;
}

.bot{
background:#1a1a22;
}

/* INPUT BAR */
.inputbox{
position:fixed;
bottom:0;
left:0;
width:100%;
background:#0b0b0f;
border-top:1px solid #1c1c22;
display:flex;
padding:10px;
gap:8px;
}

input{
flex:1;
padding:14px;
border:none;
outline:none;
border-radius:12px;
background:#15151d;
color:white;
font-size:15px;
}

button{
padding:14px 18px;
border:none;
border-radius:12px;
background:#6c5cff;
color:white;
font-weight:bold;
cursor:pointer;
}

/* LOADER */
.typing{
width:60px;
height:20px;
display:flex;
gap:5px;
}

.dot{
width:8px;
height:8px;
background:#aaa;
border-radius:50%;
animation:blink 1.4s infinite;
}

.dot:nth-child(2){animation-delay:.2s;}
.dot:nth-child(3){animation-delay:.4s;}

@keyframes blink{
0%,80%,100%{opacity:.2;}
40%{opacity:1;}
}
</style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
<h3>ReplyShastra</h3>

<div class="sidebtn">‚ûï New Chat</div>
<div class="sidebtn">üí¨ Chat History</div>
<div class="sidebtn">‚≠ê Go Premium</div>
<div class="sidebtn">‚öô Settings</div>
</div>

<!-- Header -->
<div class="header">
<div class="logo">ReplyShastra</div>
<div class="menu" onclick="toggleMenu()">‚ò∞</div>
</div>

<!-- Chat -->
<div class="chat" id="chat"></div>

<!-- Input -->
<div class="inputbox">
<input id="msg" placeholder="Apni situation likh...">
<button onclick="send()">Send</button>
</div>

<script>
const API="https://replyshastraai-production.up.railway.app/chat";

function toggleMenu(){
document.getElementById("sidebar").classList.toggle("active");
}

function addMessage(text,type){
let div=document.createElement("div");
div.className="msg "+type;
div.innerText=text;
document.getElementById("chat").appendChild(div);
document.getElementById("chat").scrollTop=999999;
}

function loader(){
let div=document.createElement("div");
div.className="msg bot";
div.id="typing";
div.innerHTML=`<div class="typing">
<div class="dot"></div>
<div class="dot"></div>
<div class="dot"></div>
</div>`;
document.getElementById("chat").appendChild(div);
document.getElementById("chat").scrollTop=999999;
}

async function send(){
let input=document.getElementById("msg");
let text=input.value.trim();
if(!text)return;

addMessage(text,"user");
input.value="";
loader();

try{
let res=await fetch(API,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({message:text})
});

let data=await res.json();
document.getElementById("typing").remove();
addMessage(data.reply,"bot");

}catch{
document.getElementById("typing").remove();
addMessage("Server se connect nahi ho pa raha. Thodi der baad try karo.","bot");
}
}
</script>

</body>
</html>
